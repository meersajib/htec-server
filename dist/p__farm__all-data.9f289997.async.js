(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[109],{26273:function(Qe,re,u){"use strict";u.r(re),u.d(re,{default:function(){return ve}});var d=u(77111),se=u(49194),l=u(66120),f=u(19530),Me=u(5317),z=u(87555),xe=u(52222),A=u(65507),Le=u(13753),b=u(81243),N=u(50189),T=u(68699),ze=u(42313),F=u(89502),p=u(44742),J=u(94043),_=u.n(J),e=u(67294),ue=u(46466),O=u(2535),W=u(62418),G=u(53788),ge=u(83561),Y=u(35344),P=u(46734),H=u(64653),Q=u(73218),V=function(Se){var R=(0,e.useState)(1),M=(0,p.Z)(R,2),I=M[0],j=M[1],D=(0,e.useState)(20),n=(0,p.Z)(D,2),t=n[0],r=n[1],s=(0,e.useState)([]),a=(0,p.Z)(s,2),c=a[0],i=a[1],m=(0,e.useState)(0),U=(0,p.Z)(m,2),g=U[0],le=U[1],ie=F.Z.RangePicker,ye=(0,ue.k6)(),De=ye.location.pathname.split("/")[3],ce=(0,e.useState)(new Date().toISOString().slice(0,10)),oe=(0,p.Z)(ce,2),K=oe[0],pe=oe[1],Ze=(0,e.useState)(new Date(new Date(K).setMonth(new Date(K).getMonth()-6)).toISOString().slice(0,10)),ee=(0,p.Z)(Ze,2),$=ee[0],we=ee[1],Ee=(0,e.useState)(""),te=(0,p.Z)(Ee,2),_e=te[0],Pe=te[1],Ce=(0,e.useState)(""),ae=(0,p.Z)(Ce,2),be=ae[0],ke=ae[1],Ae=(0,e.useState)(!1),ne=(0,p.Z)(Ae,2),Te=ne[0],me=ne[1];(0,e.useEffect)(function(){var Z=function(){var y=(0,T.Z)(_().mark(function v(){var C;return _().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,O.B0)(De,$,K);case 2:C=B.sent,C.success&&(i(C.data),le(C.meta_data.count));case 4:case"end":return B.stop()}},v)}));return function(){return y.apply(this,arguments)}}();Z()},[$,K,I]);var Ie=(0,N.Z)(c),fe=[{title:"Total Amount",key:"total_amount",dataIndex:"total_amount"},{title:"Total Number",key:"total_number",dataIndex:"total_number"},{title:"Date",key:"created_at",dataIndex:"created_at",render:function(y,v){return e.createElement(e.Fragment,null,e.createElement("span",{key:Date.now(),style:{marginBottom:5}},(0,W.Z)(new Date(v.created_at),{representation:"date"})))}},{title:"Time",key:"created_at",dataIndex:"created_at",render:function(y,v){return e.createElement(e.Fragment,null,e.createElement("span",{key:Date.now(),style:{marginBottom:5}},(0,W.Z)(new Date(v.created_at),{representation:"time"})))}}],$e=function(y,v){Pe(v[0]),ke(v[1]),me(!0)},Be=function(){var Z=(0,T.Z)(_().mark(function y(){return _().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:we(_e),pe(be);case 2:case"end":return C.stop()}},y)}));return function(){return Z.apply(this,arguments)}}();return e.createElement("div",null,e.createElement("h2",null,"Device Wise Production List"),e.createElement(ie,{onChange:$e,style:{marginBottom:"20px",marginRight:"20px"}}),Te&&e.createElement("span",{style:{position:"relative"}},e.createElement(b.Z,{onClick:function(){return Be()}},"Apply Filter"),e.createElement(Q.Z,{style:{position:"absolute",top:"-15px",right:"-8px",cursor:"pointer"},onClick:function(){return me(!1)}})),e.createElement(f.Z,{dataSource:Ie,columns:fe,pagination:{current:I,pageSize:t,total:g,onChange:function(y,v){j(y),r(v)}}}))},he=u(20902);P.kL.register(P.uw,P.f$,P.od,P.jn,P.Dx,P.u,P.De);var X=function(){var Se=(0,e.createRef)(),R=(0,ue.k6)(),M=R.location.pathname.split("/")[3],I=(0,e.useState)([]),j=(0,p.Z)(I,2),D=j[0],n=j[1],t=(0,e.useState)([]),r=(0,p.Z)(t,2),s=r[0],a=r[1],c=(0,e.useState)(1),i=(0,p.Z)(c,2),m=i[0],U=i[1],g=(0,e.useState)(20),le=(0,p.Z)(g,2),ie=le[0],ye=le[1],De=(0,e.useState)(0),ce=(0,p.Z)(De,2),oe=ce[0],K=ce[1],pe=F.Z.RangePicker,Ze=(0,e.useState)(new Date().toISOString().slice(0,10)),ee=(0,p.Z)(Ze,2),$=ee[0],we=ee[1],Ee=(0,e.useState)(""),te=(0,p.Z)(Ee,2),_e=te[0],Pe=te[1],Ce=(0,e.useState)(""),ae=(0,p.Z)(Ce,2),be=ae[0],ke=ae[1],Ae=(0,e.useState)(""),ne=(0,p.Z)(Ae,2),Te=ne[0],me=ne[1],Ie=(0,e.useState)(""),fe=(0,p.Z)(Ie,2),$e=fe[0],Be=fe[1],Z=(0,e.useState)(new Date(new Date($).setMonth(new Date($).getMonth()-1)).toISOString().slice(0,10)),y=(0,p.Z)(Z,2),v=y[0],C=y[1],Fe=(0,e.useState)(new Date().toISOString().slice(0,10)),B=(0,p.Z)(Fe,2),k=B[0],Ve=B[1],Xe=(0,e.useState)(new Date(new Date(k).setMonth(new Date(k).getMonth()-6)).toISOString().slice(0,10)),We=(0,p.Z)(Xe,2),x=We[0],qe=We[1],et=(0,e.useState)(localStorage.getItem("access_token")),je=(0,p.Z)(et,2),tt=je[0],Dt=je[1],at=(0,e.useState)(!1),Ue=(0,p.Z)(at,2),nt=Ue[0],Zt=Ue[1],rt=(0,e.useState)(!1),Ke=(0,p.Z)(rt,2),st=Ke[0],Ne=Ke[1],ut=(0,e.useState)(!1),Je=(0,p.Z)(ut,2),lt=Je[0],Ge=Je[1],it=function(){C(_e),we(Te)},ct=function(){qe(be),Ve($e)};(0,e.useEffect)(function(){var o=function(){var w=(0,T.Z)(_().mark(function h(){var S;return _().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,O.jl)(M,v,$,m,ie);case 2:S=E.sent,S!=null&&S.success&&(n(S.data),K(S.meta_data.count));case 4:case"end":return E.stop()}},h)}));return function(){return w.apply(this,arguments)}}();v&&$&&o()},[v,$,m,nt]),(0,e.useEffect)(function(){var o=function(){var w=(0,T.Z)(_().mark(function h(){var S;return _().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,O.W$)(M,x,k);case 2:S=E.sent,S.success&&a(S.data);case 4:case"end":return E.stop()}},h)}));return function(){return w.apply(this,arguments)}}();x&&k&&o()},[x,k]);var de=[],L=[];D!=null&&D.length&&Object.keys(D[0]).forEach(function(o){o==="created_at"?(de.push({title:"Date",key:o,dataIndex:o,render:function(h,S){return e.createElement(e.Fragment,null,e.createElement("span",{key:Date.now(),style:{marginBottom:5}},(0,W.Z)(new Date(S.created_at),{representation:"date"})))}}),de.push({title:"Time",key:o,dataIndex:o,render:function(h,S){return e.createElement(e.Fragment,null,e.createElement("span",{key:Date.now(),style:{marginBottom:5}},(0,W.Z)(new Date(S.created_at),{representation:"time"})))}})):de.push({title:o,key:o,dataIndex:o})});var ot=(0,N.Z)(D),pt=[].concat(de),mt=function(w,h){Pe(h[0]),me(h[1]),Ne(!0)},ft=function(w,h){ke(h[0]),Be(h[1]),Ge(!0)},dt={responsive:!0,plugins:{legend:!0}},Oe=["January","February","March","April","May","June","July","August","September","October","November","December"],gt=(0,G.Z)({start:new Date(x),end:new Date(k)});if(gt.length>3){var Ye=(0,ge.Z)({start:new Date(x),end:new Date(k)});Ye.length&&(Oe=Ye.map(function(o){return new Date(o).toString().slice(4,15)}))}else{var He=(0,Y.Z)({start:new Date(x),end:new Date(k)});He.length&&(Oe=He.map(function(o){return new Date(o).toString().slice(4,15)}))}s.length&&(Object.keys(s[0]).map(function(o){L=[].concat((0,N.Z)(L),[{label:o,data:[],borderColor:"rgb(".concat(Math.random()*(255-0+1)+0,", ").concat(Math.random()*(255-0+1)+0,", ").concat(Math.random()*(255-0+1)+0,")")}])}),s.map(function(o){Object.values(o).map(function(w,h){L[h].data.push(w)})})),L.length&&(L.length=L.length-1);var ht={labels:Oe,datasets:L},vt=e.useRef(null),Re=e.useRef(null),St=function(){Re.current&&Re.current.save()};return e.createElement("div",null,e.createElement(z.Z,{justify:"space-between"},e.createElement(A.Z,{span:16},e.createElement(pe,{onChange:mt,style:{marginBottom:"20px",marginRight:"20px"}}),st&&e.createElement("span",{style:{position:"relative"}},e.createElement(b.Z,{onClick:function(){return it()}},"Apply Filter"),e.createElement(Q.Z,{style:{position:"absolute",top:"-15px",right:"-8px",cursor:"pointer"},onClick:function(){return Ne(!1)}}))),e.createElement(A.Z,{span:8,style:{textAlign:"right"}},e.createElement("a",{target:"_blank",rel:"noreferrer",href:"http://172.104.180.56:8000/api/v1/farm/download-report/?user_id=2&start_date=".concat(x,"&end_date=").concat(k,"&token=").concat(tt)},e.createElement(b.Z,null,"Download Excel File Report")))),e.createElement(f.Z,{dataSource:ot,columns:pt,pagination:{current:m,pageSize:ie,total:oe,onChange:function(w,h){U(w),ye(h)}}}),e.createElement(se.Z,null),e.createElement("div",null,e.createElement(z.Z,{justify:"space-between"},e.createElement(A.Z,{span:16},e.createElement(pe,{onChange:ft,style:{marginBottom:"20px",marginRight:"20px"}}),lt&&e.createElement("span",{style:{position:"relative"}},e.createElement(b.Z,{onClick:function(){return ct()}},"Apply Filter"),e.createElement(Q.Z,{style:{position:"absolute",top:"-15px",right:"-8px",cursor:"pointer"},onClick:function(){return Ge(!1)}}))),e.createElement(A.Z,{span:8,style:{textAlign:"right"}},e.createElement(b.Z,{style:{marginRight:"20px"},onClick:St},"Export PDF"))),e.createElement(he.Z,{ref:Re,paperSize:"auto",margin:40,fileName:"Report for ".concat(new Date),author:"H-TEC"},e.createElement("div",{ref:vt},e.createElement(H.x1,{options:dt,data:ht})))),e.createElement(se.Z,null),e.createElement(V,null))},ve=X},2535:function(Qe,re,u){"use strict";u.d(re,{_m:function(){return Me},Ix:function(){return xe},mf:function(){return Le},v1:function(){return N},WY:function(){return ze},Y8:function(){return p},jl:function(){return _},Cz:function(){return ue},W$:function(){return W},B0:function(){return ge},cN:function(){return P},NZ:function(){return Q},dK:function(){return he},Qt:function(){return ve},iW:function(){return Se},g5:function(){return M},nt:function(){return j}});var d=u(68699),se=u(94043),l=u.n(se),f=u(2138);function Me(){return z.apply(this,arguments)}function z(){return z=(0,d.Z)(l().mark(function n(){var t;return l().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,f.ZP)("/farm/types/");case 2:return t=s.sent,s.abrupt("return",t);case 4:case"end":return s.stop()}},n)})),z.apply(this,arguments)}function xe(n,t,r){return A.apply(this,arguments)}function A(){return A=(0,d.Z)(l().mark(function n(t,r,s){var a;return l().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,f.ZP)("/farm/devices?farm_type=".concat(t,"&page=").concat(r,"&page_size=").concat(s));case 2:return a=i.sent,i.abrupt("return",a);case 4:case"end":return i.stop()}},n)})),A.apply(this,arguments)}function Le(n){return b.apply(this,arguments)}function b(){return b=(0,d.Z)(l().mark(function n(t){var r;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,f.ZP)("/farm/map-value?farm_type=".concat(t));case 2:return r=a.sent,a.abrupt("return",r);case 4:case"end":return a.stop()}},n)})),b.apply(this,arguments)}function N(n,t,r){return T.apply(this,arguments)}function T(){return T=(0,d.Z)(l().mark(function n(t,r,s){var a;return l().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,f.ZP)("/farm/alert-settings?farm_type=".concat(t,"&page=").concat(r,"&page_size=").concat(s));case 2:return a=i.sent,i.abrupt("return",a);case 4:case"end":return i.stop()}},n)})),T.apply(this,arguments)}function ze(n,t){return F.apply(this,arguments)}function F(){return F=(0,d.Z)(l().mark(function n(t,r){var s;return l().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,f.ZP)("/farm/sms-text/?page=".concat(t,"&page_size=").concat(r));case 2:return s=c.sent,c.abrupt("return",s);case 4:case"end":return c.stop()}},n)})),F.apply(this,arguments)}function p(){return J.apply(this,arguments)}function J(){return J=(0,d.Z)(l().mark(function n(){var t;return l().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,f.ZP)("/farm/devices?farm_type=all");case 2:return t=s.sent,s.abrupt("return",t);case 4:case"end":return s.stop()}},n)})),J.apply(this,arguments)}function _(n,t,r){return e.apply(this,arguments)}function e(){return e=(0,d.Z)(l().mark(function n(t,r,s){var a,c,i,m=arguments;return l().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(a=m.length>3&&m[3]!==void 0?m[3]:1,c=m.length>4&&m[4]!==void 0?m[4]:20,!(r&&s)){g.next=7;break}return g.next=5,(0,f.ZP)("/farm/all-data/?user=".concat(t,"&start_date=").concat(r,"&end_date=").concat(s,"&page=").concat(a,"&page_size=").concat(c));case 5:return i=g.sent,g.abrupt("return",i);case 7:case"end":return g.stop()}},n)})),e.apply(this,arguments)}function ue(n,t,r,s){return O.apply(this,arguments)}function O(){return O=(0,d.Z)(l().mark(function n(t,r,s,a){var c;return l().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(s&&a)){m.next=5;break}return m.next=3,(0,f.ZP)("/farm/report/?user_id=".concat(t,"&recipient=").concat(r.email,"&start_date=").concat(s,"&end_date=").concat(a));case 3:return c=m.sent,m.abrupt("return",c);case 5:case"end":return m.stop()}},n)})),O.apply(this,arguments)}function W(n,t,r){return G.apply(this,arguments)}function G(){return G=(0,d.Z)(l().mark(function n(t,r,s){var a;return l().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(r&&s)){i.next=5;break}return i.next=3,(0,f.ZP)("/farm/chart-data/?user=".concat(t,"&start_date=").concat(r,"&end_date=").concat(s));case 3:return a=i.sent,i.abrupt("return",a);case 5:case"end":return i.stop()}},n)})),G.apply(this,arguments)}function ge(n,t,r){return Y.apply(this,arguments)}function Y(){return Y=(0,d.Z)(l().mark(function n(t,r,s){var a,c,i,m=arguments;return l().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return a=m.length>3&&m[3]!==void 0?m[3]:1,c=m.length>4&&m[4]!==void 0?m[4]:20,g.next=4,(0,f.ZP)("/farm/production/?user=".concat(t,"&page=").concat(a,"&page_size=").concat(c,"&start_date=").concat(r,"&end_date=").concat(s));case 4:return i=g.sent,g.abrupt("return",i);case 6:case"end":return g.stop()}},n)})),Y.apply(this,arguments)}function P(n){return H.apply(this,arguments)}function H(){return H=(0,d.Z)(l().mark(function n(t){var r;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=(0,f.ZP)("/farm/alert-settings/",{method:"post",data:{farm_type:t.farm_type,value:t.value,level:t.level,sensor_name:t.sensor_name,sensor_code:t.sensor_code}}),a.abrupt("return",r);case 2:case"end":return a.stop()}},n)})),H.apply(this,arguments)}function Q(n,t){return V.apply(this,arguments)}function V(){return V=(0,d.Z)(l().mark(function n(t,r){var s;return l().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=(0,f.ZP)("/farm/alert-settings/".concat(r,"/"),{method:"patch",data:{farm_type:t.farm_type,value:t.value,level:t.level,sensor_name:t.sensor_name,sensor_code:t.sensor_code}}),c.abrupt("return",s);case 2:case"end":return c.stop()}},n)})),V.apply(this,arguments)}function he(n){return X.apply(this,arguments)}function X(){return X=(0,d.Z)(l().mark(function n(t){var r;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=(0,f.ZP)("/farm/alert-settings/".concat(t,"/")),a.abrupt("return",r);case 2:case"end":return a.stop()}},n)})),X.apply(this,arguments)}function ve(n){return q.apply(this,arguments)}function q(){return q=(0,d.Z)(l().mark(function n(t){var r;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=(0,f.ZP)("/farm/sms-text/".concat(t,"/")),a.abrupt("return",r);case 2:case"end":return a.stop()}},n)})),q.apply(this,arguments)}function Se(n){return R.apply(this,arguments)}function R(){return R=(0,d.Z)(l().mark(function n(t){var r;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=(0,f.ZP)("/farm/sms-text/".concat(t.farm_type,"/"),{method:"patch",data:{text:t.text}}),a.abrupt("return",r);case 2:case"end":return a.stop()}},n)})),R.apply(this,arguments)}function M(n,t){return I.apply(this,arguments)}function I(){return I=(0,d.Z)(l().mark(function n(t,r){var s;return l().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=(0,f.ZP)("/farm/sms-text/".concat(r,"/"),{method:"patch",data:{text:t.text}}),c.abrupt("return",s);case 2:case"end":return c.stop()}},n)})),I.apply(this,arguments)}function j(n){return D.apply(this,arguments)}function D(){return D=(0,d.Z)(l().mark(function n(t){var r;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=(0,f.ZP)("/farm/send-sms/",{method:"post",data:{recipient:t.recipient,message:t.message}}),a.abrupt("return",r);case 2:case"end":return a.stop()}},n)})),D.apply(this,arguments)}}}]);
